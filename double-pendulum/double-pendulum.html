<DOCTYPE html>
<html>

<head>
<title>Double Pendulum</title>
</head>

<body>

<canvas id="myCanvas" width="750" height="500">
</canvas>

<script type="text/javascript">



  var canvas = document.getElementById("myCanvas");
  var canv = canvas.getContext("2d");
  canv.strokeStyle = "#000000";

  var gravity = 1;
  var friction = 0;
  var trace = false;
  var timeInterval = 0.01;  // the inverse of speed

  var angle1 = Math.PI / 3;
  var angle2 = Math.PI / 2;
  var angularVelocity1 = 0;
  var angularVelocity2 = 0;

  function Update() {
    canv.clearRect(0, 0, 750, 500);

    // TODO(Nathan) check the math here
    angularVelocity2 -= Math.cos(angle2) * timeInterval * gravity;
    angularVelocity1 -= Math.cos(angle1) * timeInterval * gravity;
    angularVelocity1 -= (Math.cos(angle1) + 0.5 * Math.cos(angle1)) * timeInterval * gravity;

    angle1 += angularVelocity1 * timeInterval;
    angle2 += angularVelocity2 * timeInterval;

    canv.lineWidth = 10;
    canv.beginPath();

    canv.moveTo(250, 250);
    canv.lineTo(250 - 100 * Math.cos(angle1), 250 - 100 * Math.sin(angle1));
    canv.stroke();

    canv.moveTo(250 - 100 * Math.cos(angle1), 250 - 100 * Math.sin(angle1));
    canv.lineTo(250 - 100 * (Math.cos(angle1) + Math.cos(angle2)), 250 - 100 * (Math.sin(angle1) + Math.sin(angle2)));
    canv.stroke();
  }

  setInterval(Update, timeInterval * 1000);



</script>

</body>
</html>
